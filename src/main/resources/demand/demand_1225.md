-----------分界线，上述需求已经处理，请忽略------------------
# 标签编辑模块需求
1. 主分类新增、修改接口新增tagIdList字段，创建场景，先创建分类，再关联标签；编辑场景，先编辑分类，再关联标签；删除修改，删除场景，先删除分类，再删除标签关联。保证事物。
2. 子分类、内容接口类似同上。


-----------分界线，上述需求已经处理，请忽略------------------
1、主分类、子分类、内容关联标签时，删除时逻辑删除，但是数据库里面还有数据存在，插入时会插入失败。违反唯一键要求。
2、主分类、子分类、内容通过id查询时关联查询出标签列表。

-----------分界线，上述需求已经处理，请忽略------------------
级联创建内容接口需求：
再ContentController中新增创建内容接口。
参数包含 MainCategoryDTO, SubCategoryDTO, ContentDTO
1. 先创建主分类及关联的标签
2. 创建子分类及关联的标签
3. 创建内容及关联的标签
保证事物。创建成功返回ContentDTO（调查询内容方法即可）

--answer:
1. 主分类/子分类已存在的情况：
- 如果主分类名称已存在，是复用已有的还是报错？
不考虑创建新的;
- 如果主分类已存在，是否需要更新其标签关联？
不存在这种情况，因为会创建新的。
- 子分类同理

2. 参数验证：
- 主分类和子分类的名称是否必填？
必填
- 如果DTO中携带了ID，是按ID查找复用还是忽略ID创建新的？
忽略

3. 标签关联：
- 如果复用已有分类，是否需要覆盖其原有的标签关联？
不复用。

4. 返回数据：
- 返回的ContentDTO是否需要包含完整的主分类、子分类信息（嵌套结构）？
不需要，ContentDTO是已存在的类，直接调ContentService的查询方法即可。
- 还是只包含标签列表即可？
需要包含标签列表。

-----------分界线，上述需求已经处理，请忽略------------------

## 实现说明

**接口地址：** `POST /content/create-with-categories`

**请求参数：** CreateContentWithCategoriesReq
```json
{
  "mainCategory": {
    "name": "主分类名称",
    "tagIdList": [1, 2, 3]
  },
  "subCategory": {
    "name": "子分类名称",
    "tagIdList": [4, 5]
  },
  "content": {
    "title": "内容标题",
    "contentType": "image",
    "tagIdList": [6, 7, 8]
  }
}
```

**响应数据：** ContentDTO（包含标签列表）

**实现要点：**
1. 使用 @Transactional 保证事务一致性
2. 忽略DTO中传入的ID字段
3. 按顺序创建：主分类 → 子分类 → 内容
4. 每个实体创建后立即关联标签
5. 返回完整的ContentDTO（通过查询方法获取）